<!DOCTYPE html>
<html lang="en">
 <head>
  <title>Check answers</title>
 </head>
 <body>
  {% if participant_name != participant_name_check %}
   <p>{{participant_name}} checking the answers of {{participant_name_check}}</p>
   <p>Mark the answers below as correct or wrong</p>
  {% else %}
   <p>{{participant_name}}'s answers</p>
  {% endif %}
  <form action="{{next_url}}" method="post">
   <table>
   {% for i in range(1, (nbr_of_questions|int)+1) %}
    {% if i <= (page_nbr|int)*10 and i > ((page_nbr|int)-1)*10 %}
     <tr>
      <td> {{ check_counts[i|string()] }} &nbsp; </td>
      {% if checks[i|string()] == "correct" %}
      <td style="background-color:lightgreen;">
      <label for="correct">+</label>
      <input type="radio" name="{{ i }}" value="correct" onchange="this.form.submit()" checked="checeked" /> 
      </td>
      {% else %}
      <td style="background-color:white;">
      <label for="correct">+</label>
      <input type="radio" name="{{ i }}" value="correct" onchange="this.form.submit()" /> 
      </td>
      {% endif %}
      {% if checks[i|string()] == "wrong" %}
      <td style="background-color:pink;">
      <input type="radio" name="{{ i }}" value="wrong" onchange="this.form.submit()" checked="checked" /> 
      <label for="wrong">-</label>
      </td>
      {% else %}
      <td style="background-color:white;">
      <input type="radio" name="{{ i }}" value="wrong" onchange="this.form.submit()" /> 
      <label for="wrong">-</label>
      </td>
      {% endif %}
      <td style="text-align:right;">{{ i }}.</td><td> {{ answers[i|string()] }}
     </tr>
    {% endif %}
   {% endfor %}
   </table>
   <input type="hidden" name="quiz_id" value="{{quiz_id}}" />
   <input type="hidden" name="nbr_of_questions" value="{{nbr_of_questions}}" />
   <input type="hidden" name="participant_id" value="{{participant_id}}" />
   <input type="hidden" name="participant_name" value="{{participant_name}}" />
   <input type="hidden" name="participant_id_check" value="{{participant_id_check}}" />
   <input type="hidden" name="participant_name_check" value="{{participant_name_check}}" />
   <input type="hidden" name="page_nbr" value="{{page_nbr}}" />
  </form>
  <table>
   <tr>
    {% if page_nbr|int > 1 %}
     {% set prev_page_nbr = (page_nbr|int)-1 %}
    {% else %}
     {% set prev_page_nbr = (((nbr_of_questions|int)/10)|round(method="ceil"))|int %}
    {% endif %}
    <td>
     <form action="{{next_url}}" method="post">
      <input type="hidden" name="quiz_id" value="{{quiz_id}}" />
      <input type="hidden" name="nbr_of_questions" value="{{nbr_of_questions}}" />
      <input type="hidden" name="participant_id" value="{{participant_id}}" />
      <input type="hidden" name="participant_name" value="{{participant_name}}" />
      <input type="hidden" name="participant_id_check" value="{{participant_id_check}}" />
      <input type="hidden" name="participant_name_check" value="{{participant_name_check}}" />
      <input type="hidden" name="page_nbr" value="{{prev_page_nbr}}" />
      <input type="submit" value="Previous" style="background-color:whitesmoke; border-color:whitesmoke; border-radius:5px; padding:4px;" />
     </form>
    </td>
    {% if page_nbr|int < (nbr_of_questions|int)/10 %}
     {% set next_page_nbr = (page_nbr|int)+1 %}
    {% else %}
     {% set next_page_nbr = 1 %}
    {% endif %}
    <td>
     <form action="{{next_url}}" method="post">
      <input type="hidden" name="quiz_id" value="{{quiz_id}}" />
      <input type="hidden" name="nbr_of_questions" value="{{nbr_of_questions}}" />
      <input type="hidden" name="participant_id" value="{{participant_id}}" />
      <input type="hidden" name="participant_name" value="{{participant_name}}" />
      <input type="hidden" name="participant_id_check" value="{{participant_id_check}}" />
      <input type="hidden" name="participant_name_check" value="{{participant_name_check}}" />
      <input type="hidden" name="page_nbr" value="{{next_page_nbr}}" />
      <input type="submit" value="Next" style="background-color:whitesmoke; border-color:whitesmoke; border-radius:5px; padding:4px;" />
     </form>
    </td>
    <td>
     <form action="{{next_url}}" method="post">
      <input type="hidden" name="quiz_id" value="{{quiz_id}}" />
      <input type="hidden" name="nbr_of_questions" value="{{nbr_of_questions}}" />
      <input type="hidden" name="participant_id" value="{{participant_id}}" />
      <input type="hidden" name="participant_name" value="{{participant_name}}" />
      <input type="hidden" name="participant_id_check" value="{{participant_id_check}}" />
      <input type="hidden" name="participant_name_check" value="{{participant_name_check}}" />
      <input type="hidden" name="page_nbr" value="{{page_nbr}}" />
      <input type="submit" value="Update" style="background-color:whitesmoke; border-color:whitesmoke; border-radius:5px; padding:4px;" />
     </form>
    </td>
    <td>
     <form action="{{download_url}}" method="post">
      <input type="hidden" name="quiz_id" value="{{quiz_id}}" />
      <input type="hidden" name="nbr_of_questions" value="{{nbr_of_questions}}" />
      <input type="hidden" name="participant_id" value="{{participant_id}}" />
      <input type="hidden" name="participant_name" value="{{participant_name}}" />
      <input type="hidden" name="participant_id_check" value="{{participant_id_check}}" />
      <input type="hidden" name="participant_name_check" value="{{participant_name_check}}" />
      <input type="submit" value="Download" style="background-color:white; border-color:white; border-radius:5px; padding:4px;" />
     </form>
    </td>
    <td>
     <form action="{{final_url}}" method="post">
      <input type="hidden" name="quiz_id" value="{{quiz_id}}" />
      <input type="hidden" name="nbr_of_questions" value="{{nbr_of_questions}}" />
      <input type="hidden" name="participant_id" value="{{participant_id}}" />
      <input type="hidden" name="participant_name" value="{{participant_name}}" />
      <input type="hidden" name="participant_id_check" value="{{participant_id_check}}" />
      <input type="hidden" name="participant_name_check" value="{{participant_name_check}}" />
      <input type="submit" value="Stop checking" style="background-color:white; border-color:white; border-radius:5px; padding:4px;" />
     </form>
    </td>
   </tr>
  </table>
  <br />
  <font style="font-size:0.7em">
  <table style="border-spacing:0px;">
   <tr><th></th><th style="text-align:left;">Name</th><th>Status</th><th>Answered</th><th>Checked</th><th>Correct</th><tr>
  {% for key in results %}
   <tr><td style="text-align:right;">{{ loop.index }}.</td>
   <td> {{ results[key]["participant_name"] }} </td>
   <td style="text-align:center;"> {{ results[key]["status"] }} </td>
   <td style="text-align:center;"> {{ results[key]["answers_given"] }} </td>
   <td style="text-align:center;"> {{ results[key]["answers_checked"] }} </td>
   <td style="text-align:center;"> {{ results[key]["correct_answers"] }} </td>
  {% endfor %}
  </table>
  </font>
 </body>
</html>
